# 知识图谱三元组抽取工具

这是一个基于大语言模型的知识图谱三元组抽取工具，能够从中英文混合文本中提取实体关系三元组，并支持导出JSON和Neo4j图数据库存储。还提供了灵活的知识图谱查询功能。

## 功能特点

- 支持中英文混合文本处理
- 智能文本分句，保证句子完整性
- 基于大模型的知识三元组抽取
- 支持保存到Neo4j图数据库
- 支持导出为JSON文件
- 提供灵活的知识图谱查询功能
- 交互式命令行界面
- 支持批处理模式

## 环境要求

- Python 3.10
- 依赖包: OpenAI API, thulac, spacy, langdetect, py2neo(必需，用于Neo4j存储和查询)

## 安装

```bash
# 安装依赖
pip install -r requirements.txt
```

## 使用方法

### 基本用法

```bash
# 交互式模式
python main.py

# 从文件读取文本并抽取三元组
python main.py --mode extract --input input.txt

# 查询知识图谱
python main.py --mode query --query "K8S的功能是什么"
```

### 运行模式

程序支持三种运行模式:

1. **交互式模式** (interactive): 通过命令行交互界面操作
2. **抽取模式** (extract): 从文本中抽取知识三元组
3. **查询模式** (query): 查询已保存在Neo4j中的知识

## 查询功能

查询支持多种模式:

1. 完整三元组查询: 指定主语、谓语和宾语
2. 主语+谓语查询: 查找特定主语和谓语对应的所有宾语
3. 主语+宾语查询: 查找特定主语和宾语之间的所有关系
4. 谓语+宾语查询: 查找特定谓语和宾语对应的所有主语
5. 仅主语查询: 查找与特定主语相关的所有关系
6. 仅宾语查询: 查找与特定宾语相关的所有关系

## 输出格式

JSON输出格式如下:
```json
{
  "entities": [
    {"id": "E1", "name": "实体名称", "type": "类型"},
    {"id": "E2", "name": "实体名称", "type": "类型"},
    ...
  ],
  "relations": [
    {"from": "E1", "to": "E2", "relation": "关系名称"},
    ...
  ]
}
```

## Neo4j配置

默认Neo4j连接配置:
- 地址: bolt://10.100.2.1:7687

如需修改连接信息，请在`save_to_neo4j`和`query_from_neo4j`函数中更新配置。程序会尝试创建并使用名为k8s_info的数据库，如果失败则会使用默认数据库。